<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flot Examples: Toggling Series/time axes</title>
    <link href="../examples.css" rel="stylesheet" type="text/css">
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../../excanvas.min.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="../../jquery.js"></script>
    <script language="javascript" type="text/javascript" src="../../jquery.flot.js"></script>
    <script language="javascript" type="text/javascript" src="../../jquery.flot.time.js"></script>
    <script type="text/javascript">
        $(function() {

            var demoData = {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "properties": {
                        "type": "radon time-series",
                        "Station location": "00",
                        "Station elevation": "38",
                        "Station code": "ADAR",
                        "Network code": "KO",
                        "time": ["2012-11-01T00:00:00", "2012-11-01T00:15:00", "2012-11-01T00:30:00", "2012-11-01T00:45:00", "2012-11-01T01:00:00", "2012-11-01T01:15:00", "2012-11-01T01:30:00", "2012-11-01T01:45:00",
                            "2012-11-01T02:00:00", "2012-11-01T02:15:00", "2012-11-01T02:30:00", "2012-11-01T02:45:00", "2012-11-01T03:00:00", "2012-11-01T03:15:00", "2012-11-01T03:30:00", "2012-11-01T03:45:00",
                            "2012-11-01T04:00:00", "2012-11-01T04:15:00", "2012-11-01T04:30:00", "2012-11-01T04:45:00", "2012-11-01T05:00:00", "2012-11-01T05:15:00", "2012-11-01T05:30:00", "2012-11-01T05:45:00",
                            "2012-11-01T06:00:00", "2012-11-01T06:15:00", "2012-11-01T06:30:00", "2012-11-01T06:45:00", "2012-11-01T07:00:00", "2012-11-01T07:15:00", "2012-11-01T07:30:00", "2012-11-01T07:45:00",
                            "2012-11-01T08:00:00", "2012-11-01T08:15:00", "2012-11-01T08:30:00", "2012-11-01T08:45:00", "2012-11-01T09:00:00", "2012-11-01T09:15:00", "2012-11-01T09:30:00", "2012-11-01T09:45:00",
                            "2012-11-01T10:00:00", "2012-11-01T10:15:00", "2012-11-01T10:30:00", "2012-11-01T10:45:00", "2012-11-01T11:00:00", "2012-11-01T11:15:00", "2012-11-01T11:30:00", "2012-11-01T11:45:00",
                            "2012-11-01T12:00:00", "2012-11-01T12:15:00", "2012-11-01T12:30:00", "2012-11-01T12:45:00", "2012-11-01T13:00:00", "2012-11-01T13:15:00", "2012-11-01T13:30:00", "2012-11-01T13:45:00",
                            "2012-11-01T14:00:00", "2012-11-01T14:15:00", "2012-11-01T14:30:00", "2012-11-01T14:45:00", "2012-11-01T15:00:00", "2012-11-01T15:15:00", "2012-11-01T15:30:00", "2012-11-01T15:45:00",
                            "2012-11-01T16:00:00", "2012-11-01T16:15:00", "2012-11-01T16:30:00", "2012-11-01T16:45:00", "2012-11-01T17:00:00", "2012-11-01T17:15:00", "2012-11-01T17:30:00", "2012-11-01T17:45:00",
                            "2012-11-01T18:00:00", "2012-11-01T18:15:00", "2012-11-01T18:30:00", "2012-11-01T18:45:00", "2012-11-01T19:00:00", "2012-11-01T19:15:00", "2012-11-01T19:30:00", "2012-11-01T19:45:00",
                            "2012-11-01T20:00:00", "2012-11-01T20:15:00", "2012-11-01T20:30:00", "2012-11-01T20:45:00", "2012-11-01T21:00:00", "2012-11-01T21:15:00", "2012-11-01T21:30:00", "2012-11-01T21:45:00",
                            "2012-11-01T22:00:00", "2012-11-01T22:15:00", "2012-11-01T22:30:00", "2012-11-01T22:45:00", "2012-11-01T23:00:00", "2012-11-01T23:15:00", "2012-11-01T23:30:00", "2012-11-01T23:45:00",
                            "2012-11-02T00:00:00"
                        ],
                        "value": ["53", "53", "62", "85", "62", "75", "63", "68", "63", "63", "79", "65", "61", "57", "51", "59", "54", "84", "69", "56", "52", "72", "61", "71", "70", "54", "67", "78", "50", "63", "74", "59",
                            "56", "47", "66", "75", "63", "60", "62", "59", "68", "63", "60", "63", "52", "62", "58", "52", "68", "66", "68", "71", "69", "64", "54", "63", "65", "73", "66", "52", "61", "64", "71", "70", "70",
                            "66", "85", "47", "79", "59", "66", "73", "65", "65", "60", "77", "49", "61", "73", "51", "55", "66", "61", "77", "51", "64", "68", "87", "72", "48", "79", "72", "72", "65", "70", "70", "73", "279",
                            "316", "350", "338", "317", "317", "332", "325", "305", "322", "325", "326", "292", "335", "336", "358", "349", "321", "332", "330", "292", "320", "283", "298", "358", "340", "318", "304", "329",
                            "309", "325", "309", "307", "333", "346", "343", "336", "365", "342", "329", "322", "334", "325", "308", "325", "327", "320", "307", "298", "342", "353", "322", "344", "333", "337", "323", "316",
                            "301", "327", "310", "334", "299", "288", "335", "353", "334", "323", "320", "329", "314", "303", "364", "319", "354", "311", "348", "346", "315", "360", "347", "347", "337", "329", "345", "342",
                            "298", "326", "368", "337", "337", "320", "301", "341", "314", "353", "339", "334", "113", "127", "149", "107", "149", "100", "125", "125", "125", "121", "123", "132", "106", "115", "113", "130",
                            "114", "137", "120", "115", "109", "116", "144", "133", "114", "133", "107", "137", "106", "124", "116", "144", "127", "112", "127", "127", "143", "125", "122", "131", "126", "131", "157", "125",
                            "142", "121", "133", "126", "126", "130", "128", "147", "139", "120", "138", "125", "119", "110", "142", "119", "108", "117", "102", "110", "117", "114", "140", "132", "128", "132", "118", "127",
                            "136", "143", "125", "132", "141", "122", "150", "118", "131", "139", "135", "114", "118", "127", "127", "106", "122", "134", "124", "124", "131", "149", "128", "127", "129", "104", "126", "118",
                            "106", "116", "118", "113", "115", "119", "120", "124", "127", "129", "110", "114", "137", "123", "142", "121", "104", "127", "133", "119", "120", "121", "127", "143", "125", "114", "104", "120",
                            "123", "134", "131", "119", "123", "128", "122", "126", "131", "113", "130", "108", "130", "113", "124", "121", "105", "127", "115", "120", "103", "116", "117", "111", "114", "123", "117", "112",
                            "114", "103", "123", "114", "115", "103", "84", "100", "99", "123", "97", "136", "124", "126", "128", "118", "121", "112", "116", "111", "100", "103", "125", "109", "123", "108", "108", "129",
                            "106", "127", "90", "124", "128", "109", "95", "105", "114", "114", "140", "158", "161", "136", "149", "162", "138", "158", "143", "137", "161", "157", "126", "155", "145", "151", "132", "146",
                            "145", "140", "151", "145", "155", "152", "133", "148", "156", "145", "130", "144", "143", "137", "138", "140", "139", "115", "132", "138", "152", "127", "148", "142", "149", "147", "147", "137",
                            "138", "125", "110", "125", "118", "126", "120", "135", "111", "138", "138", "116", "149", "125", "135", "137", "104", "88", "108", "124", "114", "101", "124", "109", "110", "111", "138", "118",
                            "104", "132", "103", "127", "138", "114", "116", "109", "117", "116", "133", "118", "109", "113", "133", "107", "90", "104", "107", "99", "123", "105", "104", "154", "138", "124", "116", "109",
                            "141", "143", "115", "144", "140", "143", "143", "135", "146", "137", "144", "137", "156", "132", "133", "136", "146", "131", "129", "134", "149", "146", "148", "145", "135", "150", "134", "147",
                            "147", "142", "142", "149", "129", "147", "152", "150", "136", "143", "142", "143", "141", "127", "131", "131", "161", "139", "136", "130", "135", "153", "119", "105", "135", "139", "117", "129",
                            "134", "130", "131", "93", "111", "109", "99", "121", "110", "99", "123", "116", "125", "99", "96", "125", "110", "101", "97", "106", "107", "107", "102", "110", "121", "113", "117", "142", "115",
                            "107", "115", "129", "103", "93", "98", "93", "13", "16", "29", "17", "20", "18", "21", "21", "25", "13", "15", "22", "17", "22", "24", "22", "21", "25", "31", "20", "34", "23", "27", "27", "34",
                            "32", "28", "29", "27", "29", "30", "25", "28", "22", "35", "21", "31", "30", "26", "32", "25", "28", "33", "21", "32", "29", "21", "25", "28", "18", "28", "27", "29", "38", "24", "33", "23", "32",
                            "21", "36", "24", "28", "19", "31", "30", "27", "26", "28", "25", "21", "27", "24", "25", "24", "29", "25", "24", "21", "31", "22", "30", "26", "28", "30", "22", "30", "26", "30", "28", "37", "28",
                            "30", "38", "29", "25", "21", "33"
                        ]
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [30.4041, 40.70788]
                    }
                }]
            };
            var timeAr;
            var valueAr;
            var timeAr;
            var valueAr;
            $.each(demoData, function(key, val) {
                if (key == 'features') {
                    $.each(val[0], function(key2, val2) {
                        var timeAr2;
                        var valueAr2;


                        if (key2 == 'properties') {
                            $.each(val2, function(key3, val3) {
                                if (key3 == 'time') {
                                    timeAr2 = val3;
                                }
                                if (key3 == 'value') {
                                    valueAr2 = val3;
                                }
                            })
                            timeAr = timeAr2;
                            valueAr = valueAr2;
                        }
                    })
                }

            });

            var inputAr  = [];
            var inputAr0 = [];
            var inputAr1 = [];
            var inputAr2 = [];
            var inputAr3 = [];
            var inputAr4 = [];
            var inputAr5 = [];

            for (var i = 0; i < timeAr.length; i++) {
                var unixTstamp = new Date(timeAr[i]);
                unixTstamp = unixTstamp.getTime();

                var randNum = Math.floor(Math.random() * 100) + 1;
                //var tempAr = [unixTstamp, randNum];
                var tempAr = [unixTstamp, valueAr[i]];

                inputAr.push(tempAr);

                switch (i%6) {
                  case 0:
                    inputAr0.push(tempAr);
                    break;

                  case 1:
                    inputAr1.push(tempAr);
                    break;

                  case 2:
                    inputAr2.push(tempAr);
                    break;

                  case 3:
                    inputAr3.push(tempAr);
                    break;

                  case 4:
                    inputAr4.push(tempAr);
                    break;

                  case 5:
                    inputAr5.push(tempAr);
                    break;

                }
            }

            var datasets = {
                "usa": {
                    label: "USA",
                    data: inputAr0
                },

                "russia": {
                    label: "Russia",
                    data: inputAr1
                },
                "uk": {
                    label: "UK",
                    data: inputAr2
                },
                "germany": {
                    label: "Germany",
                    data: inputAr3
                },
                "denmark": {
                    label: "Denmark",
                    data: inputAr4
                },
                "sweden": {
                    label: "Sweden",
                    data: inputAr5
                }
            };


            // hard-code color indices to prevent them from shifting as
            // countries are turned on/off

            var i = 0;
            $.each(datasets, function(key, val) {
                val.color = i;
                ++i;
            });

            // insert checkboxes
            var choiceContainer = $("#choices");
            $.each(datasets, function(key, val) {
                choiceContainer.append("<br/><input type='checkbox' name='" + key +
                    "' checked='checked' id='id" + key + "'></input>" +
                    "<label for='id" + key + "'>" +
                    val.label + "</label>");
            });

            choiceContainer.find("input").click(plotAccordingToChoices);

            function plotAccordingToChoices() {

                var data = [];

                choiceContainer.find("input:checked").each(function() {
                    var key = $(this).attr("name");
                    if (key && datasets[key]) {
                        data.push(datasets[key]);
                    }
                });

                if (data.length > 0) {
                    $.plot("#placeholder_time", data, {
                        yaxis: {
                            min: 0
                        },
                        xaxis: {
                            mode: "time",
                            timeformat: "%d/%m/%Y %H:%M"
                        }
                    });
                }
            }

            plotAccordingToChoices();

            ///////////////////////////////////

            var d = inputAr;

            $.plot("#placeholder", [d], {
                xaxis: {
                    mode: "time",
                    timeformat: "%d/%m/%Y %H:%M"
                }
            });
        });
    </script>
</head>

<body>


    <div id="header">
        <h2>Toggling Series & Time Axes</h2>
    </div>

    <div id="content">

        <div class="demo-container">
            <div id="placeholder_time" class="demo-placeholder" style="float:left; width:675px;"></div>
            <p id="choices" style="float:right; width:135px;"></p>
        </div>

        <p>This example is an interactive plot. You can turn options on and off with the checkboxes next to the plot.</p>

        <hr />

        <div class="demo-container">
            <div id="placeholder" class="demo-placeholder"></div>
        </div>

        <p>Plot representing a generic value trend (y axis) over an time interval (x axis)</p>

    </div>

    <div id="footer">
        &copy; INGV EPOS team
    </div>

</body>

</html>
